drop TABLE SFH_dutydoctor CASCADE CONSTRAINTS;
drop TABLE SFH_adminappointment CASCADE CONSTRAINTS;
drop TABLE SFH_administration CASCADE CONSTRAINTS;
drop TABLE SFH_result CASCADE CONSTRAINTS;
drop TABLE SFH_files CASCADE CONSTRAINTS;
drop TABLE SFH_doctor CASCADE CONSTRAINTS;
drop TABLE SFH_admission CASCADE CONSTRAINTS;
drop TABLE SFH_specialty CASCADE CONSTRAINTS;
drop TABLE SFH_duty CASCADE CONSTRAINTS;
drop TABLE SFH_appointment CASCADE CONSTRAINTS;
drop TABLE SFH_disease CASCADE CONSTRAINTS;
drop TABLE SFH_hospital CASCADE CONSTRAINTS;
drop TABLE SFH_patient CASCADE CONSTRAINTS;
drop TABLE SFH_room CASCADE CONSTRAINTS;


CREATE TABLE SFH_ROOM(
	roomId		NUMBER(6)	NOT NULL CONSTRAINT PK_ROOM PRIMARY KEY,
	roomNumber	NUMBER(6)	NOT NULL,
	hospitalId	NUMBER(6)	NOT NULL,
	bedNum	NUMBER(3)
);

CREATE TABLE SFH_PATIENT(
	patientID	NUMBER(6)	NOT NULL CONSTRAINT PK_PATIENT PRIMARY KEY,
	ohipID		VARCHAR2(12)	NOT NULL UNIQUE,
	name		VARCHAR2(30)	NOT NULL,
	telephone	NUMBER(12)	NOT NULL,
	address	VARCHAR2(40)	NOT NULL,
	sin		VARCHAR2(15)	UNIQUE,
	insuranceProvider	VARCHAR2(40)
);

CREATE TABLE SFH_HOSPITAL(
	hospitalID	NUMBER(6)	NOT NULL CONSTRAINT PK_HOSPITAL PRIMARY KEY,
	name		VARCHAR2(30)	NOT NULL,
	address	VARCHAR2(40)	NOT NULL,
	postalCode	VARCHAR2(10)	NOT NULL,
	telephone	VARCHAR2(12)	NOT NULL
);

CREATE TABLE SFH_DISEASE(
	diseaseID	NUMBER(6)	NOT NULL CONSTRAINT PK_DISEASE PRIMARY KEY,
	name		VARCHAR2(30)	NOT NULL
);

CREATE TABLE SFH_APPOINTMENT(
	appointmentID		NUMBER(6)	NOT NULL CONSTRAINT PK_APPOINTMENT PRIMARY KEY,
	dates			DATE		NOT NULL
);

CREATE TABLE SFH_DUTY(
	dutyID		NUMBER(6)	NOT NULL CONSTRAINT PK_DUTY PRIMARY KEY,
	dates			DATE		NOT NULL
);

CREATE TABLE SFH_SPECIALTY(
	doctorID	NUMBER(6)	NOT NULL CONSTRAINT PK_SPECIALTY PRIMARY KEY,
	specialty	VARCHAR2(25)	NOT NULL
);

CREATE TABLE SFH_ADMISSION(
	admissionID	NUMBER(6)	NOT NULL CONSTRAINT PK_ADMISION PRIMARY KEY,
	patientId	NUMBER(6)	NOT NULL,
	roomID		NUMBER(6)	NOT NULL,
	startDate	DATE		NOT NULL, 
	endDate	        DATE,
	CONSTRAINT	CK_ADMISION_DATES	CHECK (startDate<=endDate),
	constraint 	FK_ADMISION_PATIENT	FOREIGN KEY (patientId) REFERENCES SFH_patient,
	constraint 	FK_ADMISION_ROOM	FOREIGN KEY (roomId) REFERENCES SFH_room
);

CREATE TABLE SFH_Doctor(
	doctorID		NUMBER(6)	NOT NULL CONSTRAINT PK_DOCTOR PRIMARY KEY,
	hospitalID		NUMBER(6)	NOT NULL,
	dutyID		NUMBER(6)	NOT NULL,
	ohipID			VARCHAR2(12)	NOT NULL UNIQUE,
	name			VARCHAR2(30)	NOT NULL,
	street			VARCHAR2(40)	NOT NULL,
	telephone		NUMBER(12)	NOT NULL, 
	doctortype	CHAR(1)		NOT NULL CHECK ( doctortype IN ('M', 'P')),
	constraint 	FK_ADMINISTRATION_HOSPITAL	FOREIGN KEY (hospitalID) REFERENCES SFH_hospital,
	constraint 	FK_ADMINISTRATION_DUTY	FOREIGN KEY (dutyID) REFERENCES SFH_duty
);

CREATE TABLE SFH_FILES(
	filesID 	NUMBER(6)	NOT NULL CONSTRAINT PK_FILES PRIMARY KEY,
	admissionID	NUMBER(6)	NOT NULL,
	doctorID	NUMBER(6)	NOT NULL,
	diseaseID	NUMBER(6)	NOT NULL,
	constraint 	FK_FILES_ADMISION	FOREIGN KEY (admissionID) REFERENCES SFH_admission,
	constraint 	FK_FILES_DOCTOR		FOREIGN KEY (doctorID) REFERENCES SFH_doctor,
	constraint 	FK_FILES_DISEASE	FOREIGN KEY (diseaseID) REFERENCES SFH_disease
);

CREATE TABLE SFH_RESULT(
	resultID	NUMBER(6)	NOT NULL CONSTRAINT PK_RESULT PRIMARY KEY,
	filesID		NUMBER(6)	NOT NULL,
	comments	VARCHAR2(300)	NOT NULL,
	dates		DATE		NOT NULL,
	constraint 	FK_RESULT_FILES	FOREIGN KEY (filesID) REFERENCES SFH_FILES
);

CREATE TABLE SFH_ADMINISTRATION(
	administrationID		NUMBER(6)	NOT NULL CONSTRAINT PK_ADMINISTRATION PRIMARY KEY,
	hospitalID		NUMBER(6)	NOT NULL,
	appointmentID NUMBER(6)	NOT NULL,
	ohipID			VARCHAR2(12)	NOT NULL UNIQUE,
	name			VARCHAR2(30)	NOT NULL,
	street			VARCHAR2(40)	NOT NULL,
	telephone		NUMBER(12)	NOT NULL,
	constraint 	FK_ADMIN_HOSPITAL	FOREIGN KEY (hospitalID) REFERENCES SFH_HOSPITAL,
	constraint 	FK_ADMIN_APPOINTMENT	FOREIGN KEY (appointmentID) REFERENCES SFH_appointment
);

CREATE TABLE SFH_ADMINAPPOINTMENT(
	administrationID	NUMBER(6)	NOT NULL,
	appointmentID		NUMBER(6)	NOT NULL,
	constraint 	FK_ADMINAPT_ADMIN	FOREIGN KEY (administrationID) REFERENCES SFH_administration,
	constraint 	FK_ADMINAPT_APT		FOREIGN KEY (appointmentID) REFERENCES SFH_appointment
);

CREATE TABLE SFH_DUTYDOCTOR(
	doctorID	NUMBER(6)	NOT NULL,
	dutyID	NUMBER(6)	NOT NULL,
	constraint 	FK_DUTYDOCTOR_DOCTOR	FOREIGN KEY (doctorID) REFERENCES SFH_doctor,
	constraint 	FK_DUTYDOCTOR_DUTY	FOREIGN KEY (dutyID) REFERENCES SFH_duty
);

